<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr" id="html">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>jQuery Test Suite</title>
	<!-- Includes -->
	<script src="../src/core.js"></script>
	<script src="../src/deferred.js"></script>
	<script src="../src/support.js"></script>
	<script src="../src/data.js"></script>
	<script src="../src/queue.js"></script>
	<script src="../src/attributes.js"></script>
	<script src="../src/event.js"></script>
	<script src="../src/sizzle/sizzle.js"></script>
	<script src="../src/sizzle-jquery.js"></script>
	<script src="../src/traversing.js"></script>
	<script src="../src/manipulation.js"></script>
	<script src="../src/css.js"></script>
	<script src="../src/ajax.js"></script>
	<script src="../src/ajax/jsonp.js"></script>
	<script src="../src/ajax/script.js"></script>
	<script src="../src/ajax/xhr.js"></script>
	<script src="../src/effects.js"></script>
	<script src="../src/offset.js"></script>
	<script src="../src/dimensions.js"></script>
</head>

<body id="body">
  Click the following button a few times, witness jQuery.fx.sync in its two states...  Each click will queue 2 animations on 201 div elements - you can click the button while the test is running to watch it tear back into place on its next dequeue.<br/>
  jQuery.fx.sync: <button id="toggle"> On/Off </button> 
  <div class="container" style='position: relative'>
    <div class="animate" style='width: 5%; background-color: blue; height: 5px;'>&nbsp;
    </div>
  </div>
  <script type="text/javascript">
    jQuery(function($){
      var $animates = $('.animate');
      for (var i = 0; i < 200; i++) {
        $animates.clone().css('top', 5*i).appendTo('.container');
      }
      $animates = $('.animate');
      function animateIt() {
        $animates.animate({
          marginLeft: 800
        }, 500).animate({
          marginLeft: 5
        }, 500);        
      }
      animateIt();
      $('#toggle').click(function() {
        jQuery.fx.sync = !jQuery.fx.sync;
        $(this).text(jQuery.fx.sync?' On ':' Off ');
        
        animateIt();
      });
    });
  </script></body>
